var tecorama_script="3.0";var rcs_mobile=new function(){this.filterActive=false;this.searchActive=false;this.runBeforeReady=function(){};this.runOnReady=function(){bw.mobile=false;bw.iphone=false;bw.ipad=false;bw.touch=false;if($("#login-form").length){$("html").addClass("login-page");$("#bottomline").append("<a href='http://roundcubeskins.net' target='_blank' class='support-link'>RoundcubeSkins.net</a>")}this.createPopupBoxes();if($("#messagelistcontainer").length){$("#messagelistcontainer").before("<div id='current-folder'><span></span></div>");rcs_mobile.updateCurrentFolder()}$("#mailboxlist li a").click(function(){rcs_mobile.updateCurrentFolder();rcs_mobile.popupHide()});if($("#rcmlistfilter").length){this.filterActive=$("#rcmlistfilter").val()!="ALL";this.updateFunnel()}if($("#messagelistcontainer").length){rcs_mobile.setMailTimeout()}if($("#messagecontent .rightcol").length){$("#messagecontent .leftcol").after($("#messagecontent .rightcol"))}rcmail.addEventListener("aftermove",function(a){rcs_mobile.addFolderSelectorHeader()});rcmail.addEventListener("aftercopy",function(a){rcs_mobile.addFolderSelectorHeader()});if($(".btn-sectionslist").length){setTimeout(function(){rcmail.section_select(new settingsLoader("general"))},500)}if($("#compose-contacts .boxfooter a").length){$("#compose-contacts .boxfooter a").on("click",function(){rcs_mobile.popupHideAll()})}if($("#header h5 select.deco").length){$("#header h5 select.deco").on("click",function(a){a.stopPropagation()})}if($(".remotehint")){setTimeout(function(){$(".remotehint").fadeOut()},3000)}$(".calendar-page #sectionslist .boxtitle.ui-widget-header a").on("click",function(){rcs_mobile.showCalendar("calendar")})};this.addFolderSelectorHeader=function(){if(!$("#folder-selector h5").length){rcs_mobile.addPopupTitle($("#folder-selector"),rcs_mobile.label_folders);rcs_mobile.addPopupClose($("#folder-selector"))}};this.createPopupBoxes=function(){$("#mailboxmenulink").text($("#mailboxmenulink").attr("title"));$("#quicksearchbar").appendTo("body");$("#mailview-left").appendTo("body");$("#messagetoolbar").appendTo("body");this.addPopupTitle($("#mailboxmenu"),$("#mailboxmenulink").attr("title"));this.addPopupTitle($("#markmessagemenu"),$("#markmessagemenulink").text());this.addPopupTitle($("#messagemenu"),$("#messagemenulink").text());this.addPopupTitle($("#replyallmenu"),$(".button.reply").text());this.addPopupTitle($("#forwardmenu"),$(".button.forward").text());this.addPopupTitle($("#mailview-left"),rcs_mobile.label_folders);this.addPopupTitle($("#header"),$("#topline .username").html());this.addPopupTitle($("#quicksearchbar"),rcs_mobile.label_search);this.addPopupTitle($("#attachmentmenu"),rcs_mobile.label_attachment);this.addPopupTitle($("#settings-sections"),rcs_mobile.label_section);this.addPopupTitle($("#mailtoolbar"),rcs_mobile.label_options);this.addPopupTitle($("#composeview-left"),$("#composeview-left h2.boxtitle").text());this.addPopupTitle($("#responsesmenu"),$("#responsesmenu li.separator:first label").text());this.addPopupTitle($("#spellmenu"),$("#mailtoolbar a.spellcheck").attr("title"));this.addPopupTitle($("#addressbooktoolbar"),rcs_mobile.label_options);if($(".calendar-page").length){this.addPopupTitle($("#messagetoolbar"),rcs_mobile.label_options)}else{this.addPopupTitle($("#messagetoolbar"),$("#taskbar .button-mail .button-inner").text())}this.makePopup($("#header"));this.makePopup($("#mailview-left"),false);this.makePopup($("#quicksearchbar"),false);this.makePopup($("#mailtoolbar"),false);this.makePopup($("#messagetoolbar"),false);this.makePopup($("#settings-sections"),false);this.makePopup($("#addressbooktoolbar"));this.makePopup($("#composeview-left"),false);this.addPopupClose($(".popup-box"));this.addPopupClose($(".popupmenu"));if($("#rcmlistfilter").length){$("#rcmlistfilter option").each(function(){$("#popup-filter").append("<a href='javascript:void(0)' onclick='rcs_mobile.applyFilter(\""+$(this).val()+"\")'>"+$(this).text()+"</a>")})}if($("#quicksearchbar").length){$("#quicksearchbar form").after($("#searchmenu ul"));$("#quicksearchbar ul").after("<a class='search-apply' href='javascript:void(0)' onclick='rcs_mobile.applySearch(this)'>"+rcs_mobile.label_search+"</a><a class='search-reset' href='javascript:void(0)' onclick='rcs_mobile.resetSearch(this, event)'>"+$("#searchreset").attr("title")+"</a>");$("#quicksearchbar form").attr("onsubmit","rcs_mobile.applySearch(); return false;")}$(".popup-box.click-close, .popupmenu.click-close, .popup-close a:not(.click-close)").on("click",function(){rcs_mobile.popupHide()});if($("#summarytable").length){$("#summarytable").html($("#summarytable").html().replace(/&nbsp;/g,""))}};this.makePopup=function(c,a,b){if(!c.length){return}a=typeof a=="undefined"?true:false;c.addClass("popup-box");c.removeClass("toolbar");if(a){c.addClass("click-close")}if(typeof b!="undefined"){c.attr("id",b)}c.appendTo("body")};this.addPopupClose=function(a){if(!a.length){return}a.prepend("<div class='popup-close'><a href='javascript:void(0)' onclick='rcs_mobile.popupHideAll()'></a></div>")};this.addPopupTitle=function(a,c){if(!a.length){return}var b="<h5>"+c+"</h5>";if(a.find(".popup-close").length){a.find(".popup-close").after(b)}else{a.prepend(b)}};this.setMailTimeout=function(){rcs_mobile.mailTimer=setTimeout("rcs_mobile.mailTimout()",1000)};this.mailTimout=function(){rcs_mobile.fixMessageList();rcs_mobile.setMailTimeout()};this.fixMessageList=function(){var b=$("#messagelist tr.message:first");if(!b.length||b.hasClass("processed")){return}b.addClass("processed");$("#messagelist tr.message").each(function(){var e=$(this).attr("id").substr(6);$(this).removeAttr("onmouseup").removeAttr("onmousedown").unbind().click(function(){console.log(e);rcmail.message_list.select_row(e,CONTROL_KEY,true)});if(!$(this).find(".subject a").length){var d=$(this).find(".subject");d.hide();d.html(d.html().replace("</span>","</span><a href='?_task=mail&_action=show&_mbox="+rcmail.env.mailbox+"&_uid="+e+"'>")+"</a>");d.show()}if($(this).find(".fromto").length){$(this).find(".from").remove();$(this).find(".to").remove()}else{if($(this).find(".from").length){$(this).find(".to").remove()}}});$("#messagelist .subject a").removeAttr("onclick");$("#messagelist .subject a").removeAttr("onmouseover");$("#messagelist .subject a").on("click",function(d){d.stopPropagation();return $("#pageDrag").offset().top==0});var a=rcmail.env.search_mods[rcmail.env.mailbox]?rcmail.env.search_mods[rcmail.env.mailbox]:rcmail.env.search_mods["*"];for(var c in a){$("#s_mod_"+c).attr("checked",true)}$("#messagelistcontainer").append($("#countcontrols"))};this.popup=function(a){$(".popup-box").hide();setTimeout(function(){$("#mainscreen").hide();$("#summary").hide();$("#"+a).show()},0)};this.popupHide=function(){window.scrollTo(0,0);$("#mainscreen").show();$("#summary").show();$(".popup-box").hide()};this.popupHideAll=function(){$(".popupmenu").hide();this.popupHide()};this.updateFunnel=function(){$("#button-funnel").toggleClass("active",this.searchActive||this.filterActive);$(".funnel-filter").toggleClass("active",this.filterActive);$(".funnel-search").toggleClass("active",this.searchActive);if(this.searchActive||this.filterActive){this.blink($("#button-funnel span"))}};this.applySearch=function(a){this.searchActive=true;rcmail.command("search","",a);rcs_mobile.updateFunnel(true);rcs_mobile.popupHide()};this.resetSearch=function(a,b){this.searchActive=false;rcmail.command("reset-search","",a,b);rcs_mobile.updateFunnel();rcs_mobile.popupHide()};this.applyFilter=function(a){this.filterActive=a!="ALL";rcmail.filter_mailbox(a);rcs_mobile.updateFunnel();rcs_mobile.popupHide()};this.blink=function(a){a.fadeOut("slow",function(){a.fadeIn("slow",function(){a.fadeOut("slow",function(){a.fadeIn("slow")})})})};this.updateCurrentFolder=function(){$("#current-folder span").html($("#mailboxcontainer li.selected a").html())};this.showCalendar=function(a){if(a=="sections"){$("#calendar-header").hide();$("#todaybutton").css("visibility","hidden");$("#prefs-box").css("visibility","hidden");$("#calendar").css("visibility","hidden");$("#tasks").css("visibility","hidden");$("#sectionslist").css("visibility","visible");$(".calendar-page #mainscreen").css("top",50);$("#main-menu #button-sections").addClass("active");$("#main-menu #button-calendar").removeClass("active");$("#main-menu #button-tasks").removeClass("active")}else{if(a=="calendar"){$("#calendar-header").show();$("#todaybutton").css("visibility","visible");$("#sectionslist").css("visibility","hidden");$("#prefs-box").css("visibility","visible");$("#tasks").css("visibility","hidden");$("#calendar").css("visibility","visible");$(".calendar-page #mainscreen").css("top",110);$("#main-menu #button-sections").removeClass("active");$("#main-menu #button-calendar").addClass("active");$("#main-menu #button-tasks").removeClass("active")}else{if(a=="tasks"){$("#calendar-header").hide();$("#todaybutton").css("visibility","hidden");$("#sectionslist").css("visibility","hidden");$("#prefs-box").css("visibility","visible");$("#calendar").css("visibility","hidden");$("#tasks").css("visibility","visible");$(".calendar-page #mainscreen").css("top",50);$("#main-menu #button-sections").removeClass("active");$("#main-menu #button-calendar").removeClass("active");$("#main-menu #button-tasks").addClass("active")}}}}};function settingsLoader(a){this.value=a;this.get_single_selection=function(){return this.value}};